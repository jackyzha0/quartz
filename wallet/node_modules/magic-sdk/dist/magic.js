var Magic=(()=>{var xn=Object.create;var Ce=Object.defineProperty;var Un=Object.getOwnPropertyDescriptor;var Bn=Object.getOwnPropertyNames,Xt=Object.getOwnPropertySymbols,Fn=Object.getPrototypeOf,zt=Object.prototype.hasOwnProperty,Gn=Object.prototype.propertyIsEnumerable;var qt=(e,t,n)=>t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jt=(e,t)=>{for(var n in t||(t={}))zt.call(t,n)&&qt(e,n,t[n]);if(Xt)for(var n of Xt(t))Gn.call(t,n)&&qt(e,n,t[n]);return e};var Qt=e=>Ce(e,"__esModule",{value:!0});var De=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,n)=>(typeof require!="undefined"?require:t)[n]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Zt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),er=(e,t)=>{for(var n in t)Ce(e,n,{get:t[n],enumerable:!0})},tr=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Bn(t))!zt.call(e,s)&&(n||s!=="default")&&Ce(e,s,{get:()=>t[s],enumerable:!(a=Un(t,s))||a.enumerable});return e},rr=(e,t)=>tr(Qt(Ce(e!=null?xn(Fn(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),jn=(e=>(t,n)=>e&&e.get(t)||(n=tr(Qt({}),t,1),e&&e.set(t,n),n))(typeof WeakMap!="undefined"?new WeakMap:0);var we=(e,t,n)=>new Promise((a,s)=>{var c=m=>{try{p(n.next(m))}catch(v){s(v)}},g=m=>{try{p(n.throw(m))}catch(v){s(v)}},p=m=>m.done?a(m.value):Promise.resolve(m.value).then(c,g);p((n=n.apply(e,t)).next())});var Br=Zt((Ur,St)=>{(function(e){if(typeof Ur=="object"&&typeof St!="undefined")St.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.localforage=e()}})(function(){var e,t,n;return function a(s,c,g){function p(y,N){if(!c[y]){if(!s[y]){var I=typeof De=="function"&&De;if(!N&&I)return I(y,!0);if(m)return m(y,!0);var O=new Error("Cannot find module '"+y+"'");throw O.code="MODULE_NOT_FOUND",O}var P=c[y]={exports:{}};s[y][0].call(P.exports,function(U){var L=s[y][1][U];return p(L||U)},P,P.exports,a,s,c,g)}return c[y].exports}for(var m=typeof De=="function"&&De,v=0;v<g.length;v++)p(g[v]);return p}({1:[function(a,s,c){(function(g){"use strict";var p=g.MutationObserver||g.WebKitMutationObserver,m;if(p){var v=0,y=new p(U),N=g.document.createTextNode("");y.observe(N,{characterData:!0}),m=function(){N.data=v=++v%2}}else if(!g.setImmediate&&typeof g.MessageChannel!="undefined"){var I=new g.MessageChannel;I.port1.onmessage=U,m=function(){I.port2.postMessage(0)}}else"document"in g&&"onreadystatechange"in g.document.createElement("script")?m=function(){var F=g.document.createElement("script");F.onreadystatechange=function(){U(),F.onreadystatechange=null,F.parentNode.removeChild(F),F=null},g.document.documentElement.appendChild(F)}:m=function(){setTimeout(U,0)};var O,P=[];function U(){O=!0;for(var F,X,C=P.length;C;){for(X=P,P=[],F=-1;++F<C;)X[F]();C=P.length}O=!1}s.exports=L;function L(F){P.push(F)===1&&!O&&m()}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],2:[function(a,s,c){"use strict";var g=a(1);function p(){}var m={},v=["REJECTED"],y=["FULFILLED"],N=["PENDING"];s.exports=I;function I(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=N,this.queue=[],this.outcome=void 0,S!==p&&L(this,S)}I.prototype.catch=function(S){return this.then(null,S)},I.prototype.then=function(S,G){if(typeof S!="function"&&this.state===y||typeof G!="function"&&this.state===v)return this;var x=new this.constructor(p);if(this.state!==N){var W=this.state===y?S:G;P(x,W,this.outcome)}else this.queue.push(new O(x,S,G));return x};function O(S,G,x){this.promise=S,typeof G=="function"&&(this.onFulfilled=G,this.callFulfilled=this.otherCallFulfilled),typeof x=="function"&&(this.onRejected=x,this.callRejected=this.otherCallRejected)}O.prototype.callFulfilled=function(S){m.resolve(this.promise,S)},O.prototype.otherCallFulfilled=function(S){P(this.promise,this.onFulfilled,S)},O.prototype.callRejected=function(S){m.reject(this.promise,S)},O.prototype.otherCallRejected=function(S){P(this.promise,this.onRejected,S)};function P(S,G,x){g(function(){var W;try{W=G(x)}catch(z){return m.reject(S,z)}W===S?m.reject(S,new TypeError("Cannot resolve promise with itself")):m.resolve(S,W)})}m.resolve=function(S,G){var x=F(U,G);if(x.status==="error")return m.reject(S,x.value);var W=x.value;if(W)L(S,W);else{S.state=y,S.outcome=G;for(var z=-1,ne=S.queue.length;++z<ne;)S.queue[z].callFulfilled(G)}return S},m.reject=function(S,G){S.state=v,S.outcome=G;for(var x=-1,W=S.queue.length;++x<W;)S.queue[x].callRejected(G);return S};function U(S){var G=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof G=="function")return function(){G.apply(S,arguments)}}function L(S,G){var x=!1;function W(se){x||(x=!0,m.reject(S,se))}function z(se){x||(x=!0,m.resolve(S,se))}function ne(){G(z,W)}var ae=F(ne);ae.status==="error"&&W(ae.value)}function F(S,G){var x={};try{x.value=S(G),x.status="success"}catch(W){x.status="error",x.value=W}return x}I.resolve=X;function X(S){return S instanceof this?S:m.resolve(new this(p),S)}I.reject=C;function C(S){var G=new this(p);return m.reject(G,S)}I.all=pe;function pe(S){var G=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=S.length,W=!1;if(!x)return this.resolve([]);for(var z=new Array(x),ne=0,ae=-1,se=new this(p);++ae<x;)ce(S[ae],ae);return se;function ce(ye,d){G.resolve(ye).then(_,function(A){W||(W=!0,m.reject(se,A))});function _(A){z[d]=A,++ne===x&&!W&&(W=!0,m.resolve(se,z))}}}I.race=re;function re(S){var G=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var x=S.length,W=!1;if(!x)return this.resolve([]);for(var z=-1,ne=new this(p);++z<x;)ae(S[z]);return ne;function ae(se){G.resolve(se).then(function(ce){W||(W=!0,m.resolve(ne,ce))},function(ce){W||(W=!0,m.reject(ne,ce))})}}},{"1":1}],3:[function(a,s,c){(function(g){"use strict";typeof g.Promise!="function"&&(g.Promise=a(2))}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"2":2}],4:[function(a,s,c){"use strict";var g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};function p(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function m(){try{if(typeof indexedDB!="undefined")return indexedDB;if(typeof webkitIndexedDB!="undefined")return webkitIndexedDB;if(typeof mozIndexedDB!="undefined")return mozIndexedDB;if(typeof OIndexedDB!="undefined")return OIndexedDB;if(typeof msIndexedDB!="undefined")return msIndexedDB}catch{return}}var v=m();function y(){try{if(!v||!v.open)return!1;var r=typeof openDatabase!="undefined"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),o=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!r||o)&&typeof indexedDB!="undefined"&&typeof IDBKeyRange!="undefined"}catch{return!1}}function N(r,o){r=r||[],o=o||{};try{return new Blob(r,o)}catch(u){if(u.name!=="TypeError")throw u;for(var i=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,l=new i,f=0;f<r.length;f+=1)l.append(r[f]);return l.getBlob(o.type)}}typeof Promise=="undefined"&&a(3);var I=Promise;function O(r,o){o&&r.then(function(i){o(null,i)},function(i){o(i)})}function P(r,o,i){typeof o=="function"&&r.then(o),typeof i=="function"&&r.catch(i)}function U(r){return typeof r!="string"&&(console.warn(r+" used as a key, but it is not a string."),r=String(r)),r}function L(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var F="local-forage-detect-blob-support",X=void 0,C={},pe=Object.prototype.toString,re="readonly",S="readwrite";function G(r){for(var o=r.length,i=new ArrayBuffer(o),l=new Uint8Array(i),f=0;f<o;f++)l[f]=r.charCodeAt(f);return i}function x(r){return new I(function(o){var i=r.transaction(F,S),l=N([""]);i.objectStore(F).put(l,"key"),i.onabort=function(f){f.preventDefault(),f.stopPropagation(),o(!1)},i.oncomplete=function(){var f=navigator.userAgent.match(/Chrome\/(\d+)/),u=navigator.userAgent.match(/Edge\//);o(u||!f||parseInt(f[1],10)>=43)}}).catch(function(){return!1})}function W(r){return typeof X=="boolean"?I.resolve(X):x(r).then(function(o){return X=o,X})}function z(r){var o=C[r.name],i={};i.promise=new I(function(l,f){i.resolve=l,i.reject=f}),o.deferredOperations.push(i),o.dbReady?o.dbReady=o.dbReady.then(function(){return i.promise}):o.dbReady=i.promise}function ne(r){var o=C[r.name],i=o.deferredOperations.pop();if(i)return i.resolve(),i.promise}function ae(r,o){var i=C[r.name],l=i.deferredOperations.pop();if(l)return l.reject(o),l.promise}function se(r,o){return new I(function(i,l){if(C[r.name]=C[r.name]||Q(),r.db)if(o)z(r),r.db.close();else return i(r.db);var f=[r.name];o&&f.push(r.version);var u=v.open.apply(v,f);o&&(u.onupgradeneeded=function(h){var E=u.result;try{E.createObjectStore(r.storeName),h.oldVersion<=1&&E.createObjectStore(F)}catch(b){if(b.name==="ConstraintError")console.warn('The database "'+r.name+'" has been upgraded from version '+h.oldVersion+" to version "+h.newVersion+', but the storage "'+r.storeName+'" already exists.');else throw b}}),u.onerror=function(h){h.preventDefault(),l(u.error)},u.onsuccess=function(){i(u.result),ne(r)}})}function ce(r){return se(r,!1)}function ye(r){return se(r,!0)}function d(r,o){if(!r.db)return!0;var i=!r.db.objectStoreNames.contains(r.storeName),l=r.version<r.db.version,f=r.version>r.db.version;if(l&&(r.version!==o&&console.warn('The database "'+r.name+`" can't be downgraded from version `+r.db.version+" to version "+r.version+"."),r.version=r.db.version),f||i){if(i){var u=r.db.version+1;u>r.version&&(r.version=u)}return!0}return!1}function _(r){return new I(function(o,i){var l=new FileReader;l.onerror=i,l.onloadend=function(f){var u=btoa(f.target.result||"");o({__local_forage_encoded_blob:!0,data:u,type:r.type})},l.readAsBinaryString(r)})}function A(r){var o=G(atob(r.data));return N([o],{type:r.type})}function M(r){return r&&r.__local_forage_encoded_blob}function $(r){var o=this,i=o._initReady().then(function(){var l=C[o._dbInfo.name];if(l&&l.dbReady)return l.dbReady});return P(i,r,r),i}function D(r){z(r);for(var o=C[r.name],i=o.forages,l=0;l<i.length;l++){var f=i[l];f._dbInfo.db&&(f._dbInfo.db.close(),f._dbInfo.db=null)}return r.db=null,ce(r).then(function(u){return r.db=u,d(r)?ye(r):u}).then(function(u){r.db=o.db=u;for(var h=0;h<i.length;h++)i[h]._dbInfo.db=u}).catch(function(u){throw ae(r,u),u})}function j(r,o,i,l){l===void 0&&(l=1);try{var f=r.db.transaction(r.storeName,o);i(null,f)}catch(u){if(l>0&&(!r.db||u.name==="InvalidStateError"||u.name==="NotFoundError"))return I.resolve().then(function(){if(!r.db||u.name==="NotFoundError"&&!r.db.objectStoreNames.contains(r.storeName)&&r.version<=r.db.version)return r.db&&(r.version=r.db.version+1),ye(r)}).then(function(){return D(r).then(function(){j(r,o,i,l-1)})}).catch(i);i(u)}}function Q(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function be(r){var o=this,i={db:null};if(r)for(var l in r)i[l]=r[l];var f=C[i.name];f||(f=Q(),C[i.name]=f),f.forages.push(o),o._initReady||(o._initReady=o.ready,o.ready=$);var u=[];function h(){return I.resolve()}for(var E=0;E<f.forages.length;E++){var b=f.forages[E];b!==o&&u.push(b._initReady().catch(h))}var R=f.forages.slice(0);return I.all(u).then(function(){return i.db=f.db,ce(i)}).then(function(w){return i.db=w,d(i,o._defaultConfig.version)?ye(i):w}).then(function(w){i.db=f.db=w,o._dbInfo=i;for(var T=0;T<R.length;T++){var B=R[T];B!==o&&(B._dbInfo.db=i.db,B._dbInfo.version=i.version)}})}function Ee(r,o){var i=this;r=U(r);var l=new I(function(f,u){i.ready().then(function(){j(i._dbInfo,re,function(h,E){if(h)return u(h);try{var b=E.objectStore(i._dbInfo.storeName),R=b.get(r);R.onsuccess=function(){var w=R.result;w===void 0&&(w=null),M(w)&&(w=A(w)),f(w)},R.onerror=function(){u(R.error)}}catch(w){u(w)}})}).catch(u)});return O(l,o),l}function Me(r,o){var i=this,l=new I(function(f,u){i.ready().then(function(){j(i._dbInfo,re,function(h,E){if(h)return u(h);try{var b=E.objectStore(i._dbInfo.storeName),R=b.openCursor(),w=1;R.onsuccess=function(){var T=R.result;if(T){var B=T.value;M(B)&&(B=A(B));var k=r(B,T.key,w++);k!==void 0?f(k):T.continue()}else f()},R.onerror=function(){u(R.error)}}catch(T){u(T)}})}).catch(u)});return O(l,o),l}function jr(r,o,i){var l=this;r=U(r);var f=new I(function(u,h){var E;l.ready().then(function(){return E=l._dbInfo,pe.call(o)==="[object Blob]"?W(E.db).then(function(b){return b?o:_(o)}):o}).then(function(b){j(l._dbInfo,S,function(R,w){if(R)return h(R);try{var T=w.objectStore(l._dbInfo.storeName);b===null&&(b=void 0);var B=T.put(b,r);w.oncomplete=function(){b===void 0&&(b=null),u(b)},w.onabort=w.onerror=function(){var k=B.error?B.error:B.transaction.error;h(k)}}catch(k){h(k)}})}).catch(h)});return O(f,i),f}function kr(r,o){var i=this;r=U(r);var l=new I(function(f,u){i.ready().then(function(){j(i._dbInfo,S,function(h,E){if(h)return u(h);try{var b=E.objectStore(i._dbInfo.storeName),R=b.delete(r);E.oncomplete=function(){f()},E.onerror=function(){u(R.error)},E.onabort=function(){var w=R.error?R.error:R.transaction.error;u(w)}}catch(w){u(w)}})}).catch(u)});return O(l,o),l}function Wr(r){var o=this,i=new I(function(l,f){o.ready().then(function(){j(o._dbInfo,S,function(u,h){if(u)return f(u);try{var E=h.objectStore(o._dbInfo.storeName),b=E.clear();h.oncomplete=function(){l()},h.onabort=h.onerror=function(){var R=b.error?b.error:b.transaction.error;f(R)}}catch(R){f(R)}})}).catch(f)});return O(i,r),i}function Yr(r){var o=this,i=new I(function(l,f){o.ready().then(function(){j(o._dbInfo,re,function(u,h){if(u)return f(u);try{var E=h.objectStore(o._dbInfo.storeName),b=E.count();b.onsuccess=function(){l(b.result)},b.onerror=function(){f(b.error)}}catch(R){f(R)}})}).catch(f)});return O(i,r),i}function Kr(r,o){var i=this,l=new I(function(f,u){if(r<0){f(null);return}i.ready().then(function(){j(i._dbInfo,re,function(h,E){if(h)return u(h);try{var b=E.objectStore(i._dbInfo.storeName),R=!1,w=b.openKeyCursor();w.onsuccess=function(){var T=w.result;if(!T){f(null);return}r===0||R?f(T.key):(R=!0,T.advance(r))},w.onerror=function(){u(w.error)}}catch(T){u(T)}})}).catch(u)});return O(l,o),l}function Hr(r){var o=this,i=new I(function(l,f){o.ready().then(function(){j(o._dbInfo,re,function(u,h){if(u)return f(u);try{var E=h.objectStore(o._dbInfo.storeName),b=E.openKeyCursor(),R=[];b.onsuccess=function(){var w=b.result;if(!w){l(R);return}R.push(w.key),w.continue()},b.onerror=function(){f(b.error)}}catch(w){f(w)}})}).catch(f)});return O(i,r),i}function Vr(r,o){o=L.apply(this,arguments);var i=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||i.name,r.storeName=r.storeName||i.storeName);var l=this,f;if(!r.name)f=I.reject("Invalid arguments");else{var u=r.name===i.name&&l._dbInfo.db,h=u?I.resolve(l._dbInfo.db):ce(r).then(function(E){var b=C[r.name],R=b.forages;b.db=E;for(var w=0;w<R.length;w++)R[w]._dbInfo.db=E;return E});r.storeName?f=h.then(function(E){if(!!E.objectStoreNames.contains(r.storeName)){var b=E.version+1;z(r);var R=C[r.name],w=R.forages;E.close();for(var T=0;T<w.length;T++){var B=w[T];B._dbInfo.db=null,B._dbInfo.version=b}var k=new I(function(Y,q){var V=v.open(r.name,b);V.onerror=function(ie){var Pe=V.result;Pe.close(),q(ie)},V.onupgradeneeded=function(){var ie=V.result;ie.deleteObjectStore(r.storeName)},V.onsuccess=function(){var ie=V.result;ie.close(),Y(ie)}});return k.then(function(Y){R.db=Y;for(var q=0;q<w.length;q++){var V=w[q];V._dbInfo.db=Y,ne(V._dbInfo)}}).catch(function(Y){throw(ae(r,Y)||I.resolve()).catch(function(){}),Y})}}):f=h.then(function(E){z(r);var b=C[r.name],R=b.forages;E.close();for(var w=0;w<R.length;w++){var T=R[w];T._dbInfo.db=null}var B=new I(function(k,Y){var q=v.deleteDatabase(r.name);q.onerror=q.onblocked=function(V){var ie=q.result;ie&&ie.close(),Y(V)},q.onsuccess=function(){var V=q.result;V&&V.close(),k(V)}});return B.then(function(k){b.db=k;for(var Y=0;Y<R.length;Y++){var q=R[Y];ne(q._dbInfo)}}).catch(function(k){throw(ae(r,k)||I.resolve()).catch(function(){}),k})})}return O(f,o),f}var Xr={_driver:"asyncStorage",_initStorage:be,_support:y(),iterate:Me,getItem:Ee,setItem:jr,removeItem:kr,clear:Wr,length:Yr,key:Kr,keys:Hr,dropInstance:Vr};function zr(){return typeof openDatabase=="function"}var me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qr="~~local_forage_type~",Tt=/^~~local_forage_type~([^~]+)~/,He="__lfsc__:",st=He.length,ut="arbf",ct="blob",Lt="si08",Mt="ui08",$t="uic8",Pt="si16",Ct="si32",Dt="ur16",xt="ui32",Ut="fl32",Bt="fl64",Ft=st+ut.length,Gt=Object.prototype.toString;function jt(r){var o=r.length*.75,i=r.length,l,f=0,u,h,E,b;r[r.length-1]==="="&&(o--,r[r.length-2]==="="&&o--);var R=new ArrayBuffer(o),w=new Uint8Array(R);for(l=0;l<i;l+=4)u=me.indexOf(r[l]),h=me.indexOf(r[l+1]),E=me.indexOf(r[l+2]),b=me.indexOf(r[l+3]),w[f++]=u<<2|h>>4,w[f++]=(h&15)<<4|E>>2,w[f++]=(E&3)<<6|b&63;return R}function lt(r){var o=new Uint8Array(r),i="",l;for(l=0;l<o.length;l+=3)i+=me[o[l]>>2],i+=me[(o[l]&3)<<4|o[l+1]>>4],i+=me[(o[l+1]&15)<<2|o[l+2]>>6],i+=me[o[l+2]&63];return o.length%3===2?i=i.substring(0,i.length-1)+"=":o.length%3===1&&(i=i.substring(0,i.length-2)+"=="),i}function Jr(r,o){var i="";if(r&&(i=Gt.call(r)),r&&(i==="[object ArrayBuffer]"||r.buffer&&Gt.call(r.buffer)==="[object ArrayBuffer]")){var l,f=He;r instanceof ArrayBuffer?(l=r,f+=ut):(l=r.buffer,i==="[object Int8Array]"?f+=Lt:i==="[object Uint8Array]"?f+=Mt:i==="[object Uint8ClampedArray]"?f+=$t:i==="[object Int16Array]"?f+=Pt:i==="[object Uint16Array]"?f+=Dt:i==="[object Int32Array]"?f+=Ct:i==="[object Uint32Array]"?f+=xt:i==="[object Float32Array]"?f+=Ut:i==="[object Float64Array]"?f+=Bt:o(new Error("Failed to get type for BinaryArray"))),o(f+lt(l))}else if(i==="[object Blob]"){var u=new FileReader;u.onload=function(){var h=qr+r.type+"~"+lt(this.result);o(He+ct+h)},u.readAsArrayBuffer(r)}else try{o(JSON.stringify(r))}catch(h){console.error("Couldn't convert value into a JSON string: ",r),o(null,h)}}function Qr(r){if(r.substring(0,st)!==He)return JSON.parse(r);var o=r.substring(Ft),i=r.substring(st,Ft),l;if(i===ct&&Tt.test(o)){var f=o.match(Tt);l=f[1],o=o.substring(f[0].length)}var u=jt(o);switch(i){case ut:return u;case ct:return N([u],{type:l});case Lt:return new Int8Array(u);case Mt:return new Uint8Array(u);case $t:return new Uint8ClampedArray(u);case Pt:return new Int16Array(u);case Dt:return new Uint16Array(u);case Ct:return new Int32Array(u);case xt:return new Uint32Array(u);case Ut:return new Float32Array(u);case Bt:return new Float64Array(u);default:throw new Error("Unkown type: "+i)}}var ft={serialize:Jr,deserialize:Qr,stringToBuffer:jt,bufferToString:lt};function kt(r,o,i,l){r.executeSql("CREATE TABLE IF NOT EXISTS "+o.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],i,l)}function Zr(r){var o=this,i={db:null};if(r)for(var l in r)i[l]=typeof r[l]!="string"?r[l].toString():r[l];var f=new I(function(u,h){try{i.db=openDatabase(i.name,String(i.version),i.description,i.size)}catch(E){return h(E)}i.db.transaction(function(E){kt(E,i,function(){o._dbInfo=i,u()},function(b,R){h(R)})},h)});return i.serializer=ft,f}function ve(r,o,i,l,f,u){r.executeSql(i,l,f,function(h,E){E.code===E.SYNTAX_ERR?h.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[o.storeName],function(b,R){R.rows.length?u(b,E):kt(b,o,function(){b.executeSql(i,l,f,u)},u)},u):u(h,E)},u)}function en(r,o){var i=this;r=U(r);var l=new I(function(f,u){i.ready().then(function(){var h=i._dbInfo;h.db.transaction(function(E){ve(E,h,"SELECT * FROM "+h.storeName+" WHERE key = ? LIMIT 1",[r],function(b,R){var w=R.rows.length?R.rows.item(0).value:null;w&&(w=h.serializer.deserialize(w)),f(w)},function(b,R){u(R)})})}).catch(u)});return O(l,o),l}function tn(r,o){var i=this,l=new I(function(f,u){i.ready().then(function(){var h=i._dbInfo;h.db.transaction(function(E){ve(E,h,"SELECT * FROM "+h.storeName,[],function(b,R){for(var w=R.rows,T=w.length,B=0;B<T;B++){var k=w.item(B),Y=k.value;if(Y&&(Y=h.serializer.deserialize(Y)),Y=r(Y,k.key,B+1),Y!==void 0){f(Y);return}}f()},function(b,R){u(R)})})}).catch(u)});return O(l,o),l}function Wt(r,o,i,l){var f=this;r=U(r);var u=new I(function(h,E){f.ready().then(function(){o===void 0&&(o=null);var b=o,R=f._dbInfo;R.serializer.serialize(o,function(w,T){T?E(T):R.db.transaction(function(B){ve(B,R,"INSERT OR REPLACE INTO "+R.storeName+" (key, value) VALUES (?, ?)",[r,w],function(){h(b)},function(k,Y){E(Y)})},function(B){if(B.code===B.QUOTA_ERR){if(l>0){h(Wt.apply(f,[r,b,i,l-1]));return}E(B)}})})}).catch(E)});return O(u,i),u}function rn(r,o,i){return Wt.apply(this,[r,o,i,1])}function nn(r,o){var i=this;r=U(r);var l=new I(function(f,u){i.ready().then(function(){var h=i._dbInfo;h.db.transaction(function(E){ve(E,h,"DELETE FROM "+h.storeName+" WHERE key = ?",[r],function(){f()},function(b,R){u(R)})})}).catch(u)});return O(l,o),l}function on(r){var o=this,i=new I(function(l,f){o.ready().then(function(){var u=o._dbInfo;u.db.transaction(function(h){ve(h,u,"DELETE FROM "+u.storeName,[],function(){l()},function(E,b){f(b)})})}).catch(f)});return O(i,r),i}function an(r){var o=this,i=new I(function(l,f){o.ready().then(function(){var u=o._dbInfo;u.db.transaction(function(h){ve(h,u,"SELECT COUNT(key) as c FROM "+u.storeName,[],function(E,b){var R=b.rows.item(0).c;l(R)},function(E,b){f(b)})})}).catch(f)});return O(i,r),i}function sn(r,o){var i=this,l=new I(function(f,u){i.ready().then(function(){var h=i._dbInfo;h.db.transaction(function(E){ve(E,h,"SELECT key FROM "+h.storeName+" WHERE id = ? LIMIT 1",[r+1],function(b,R){var w=R.rows.length?R.rows.item(0).key:null;f(w)},function(b,R){u(R)})})}).catch(u)});return O(l,o),l}function un(r){var o=this,i=new I(function(l,f){o.ready().then(function(){var u=o._dbInfo;u.db.transaction(function(h){ve(h,u,"SELECT key FROM "+u.storeName,[],function(E,b){for(var R=[],w=0;w<b.rows.length;w++)R.push(b.rows.item(w).key);l(R)},function(E,b){f(b)})})}).catch(f)});return O(i,r),i}function cn(r){return new I(function(o,i){r.transaction(function(l){l.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(f,u){for(var h=[],E=0;E<u.rows.length;E++)h.push(u.rows.item(E).name);o({db:r,storeNames:h})},function(f,u){i(u)})},function(l){i(l)})})}function ln(r,o){o=L.apply(this,arguments);var i=this.config();r=typeof r!="function"&&r||{},r.name||(r.name=r.name||i.name,r.storeName=r.storeName||i.storeName);var l=this,f;return r.name?f=new I(function(u){var h;r.name===i.name?h=l._dbInfo.db:h=openDatabase(r.name,"","",0),r.storeName?u({db:h,storeNames:[r.storeName]}):u(cn(h))}).then(function(u){return new I(function(h,E){u.db.transaction(function(b){function R(k){return new I(function(Y,q){b.executeSql("DROP TABLE IF EXISTS "+k,[],function(){Y()},function(V,ie){q(ie)})})}for(var w=[],T=0,B=u.storeNames.length;T<B;T++)w.push(R(u.storeNames[T]));I.all(w).then(function(){h()}).catch(function(k){E(k)})},function(b){E(b)})})}):f=I.reject("Invalid arguments"),O(f,o),f}var fn={_driver:"webSQLStorage",_initStorage:Zr,_support:zr(),iterate:tn,getItem:en,setItem:rn,removeItem:nn,clear:on,length:an,key:sn,keys:un,dropInstance:ln};function dn(){try{return typeof localStorage!="undefined"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Yt(r,o){var i=r.name+"/";return r.storeName!==o.storeName&&(i+=r.storeName+"/"),i}function hn(){var r="_localforage_support_test";try{return localStorage.setItem(r,!0),localStorage.removeItem(r),!1}catch{return!0}}function pn(){return!hn()||localStorage.length>0}function mn(r){var o=this,i={};if(r)for(var l in r)i[l]=r[l];return i.keyPrefix=Yt(r,o._defaultConfig),pn()?(o._dbInfo=i,i.serializer=ft,I.resolve()):I.reject()}function vn(r){var o=this,i=o.ready().then(function(){for(var l=o._dbInfo.keyPrefix,f=localStorage.length-1;f>=0;f--){var u=localStorage.key(f);u.indexOf(l)===0&&localStorage.removeItem(u)}});return O(i,r),i}function gn(r,o){var i=this;r=U(r);var l=i.ready().then(function(){var f=i._dbInfo,u=localStorage.getItem(f.keyPrefix+r);return u&&(u=f.serializer.deserialize(u)),u});return O(l,o),l}function yn(r,o){var i=this,l=i.ready().then(function(){for(var f=i._dbInfo,u=f.keyPrefix,h=u.length,E=localStorage.length,b=1,R=0;R<E;R++){var w=localStorage.key(R);if(w.indexOf(u)===0){var T=localStorage.getItem(w);if(T&&(T=f.serializer.deserialize(T)),T=r(T,w.substring(h),b++),T!==void 0)return T}}});return O(l,o),l}function En(r,o){var i=this,l=i.ready().then(function(){var f=i._dbInfo,u;try{u=localStorage.key(r)}catch{u=null}return u&&(u=u.substring(f.keyPrefix.length)),u});return O(l,o),l}function _n(r){var o=this,i=o.ready().then(function(){for(var l=o._dbInfo,f=localStorage.length,u=[],h=0;h<f;h++){var E=localStorage.key(h);E.indexOf(l.keyPrefix)===0&&u.push(E.substring(l.keyPrefix.length))}return u});return O(i,r),i}function In(r){var o=this,i=o.keys().then(function(l){return l.length});return O(i,r),i}function bn(r,o){var i=this;r=U(r);var l=i.ready().then(function(){var f=i._dbInfo;localStorage.removeItem(f.keyPrefix+r)});return O(l,o),l}function Rn(r,o,i){var l=this;r=U(r);var f=l.ready().then(function(){o===void 0&&(o=null);var u=o;return new I(function(h,E){var b=l._dbInfo;b.serializer.serialize(o,function(R,w){if(w)E(w);else try{localStorage.setItem(b.keyPrefix+r,R),h(u)}catch(T){(T.name==="QuotaExceededError"||T.name==="NS_ERROR_DOM_QUOTA_REACHED")&&E(T),E(T)}})})});return O(f,i),f}function wn(r,o){if(o=L.apply(this,arguments),r=typeof r!="function"&&r||{},!r.name){var i=this.config();r.name=r.name||i.name,r.storeName=r.storeName||i.storeName}var l=this,f;return r.name?f=new I(function(u){r.storeName?u(Yt(r,l._defaultConfig)):u(r.name+"/")}).then(function(u){for(var h=localStorage.length-1;h>=0;h--){var E=localStorage.key(h);E.indexOf(u)===0&&localStorage.removeItem(E)}}):f=I.reject("Invalid arguments"),O(f,o),f}var An={_driver:"localStorageWrapper",_initStorage:mn,_support:dn(),iterate:yn,getItem:gn,setItem:Rn,removeItem:bn,clear:vn,length:In,key:En,keys:_n,dropInstance:wn},Sn=function(o,i){return o===i||typeof o=="number"&&typeof i=="number"&&isNaN(o)&&isNaN(i)},Nn=function(o,i){for(var l=o.length,f=0;f<l;){if(Sn(o[f],i))return!0;f++}return!1},Kt=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"},$e={},Ht={},Re={INDEXEDDB:Xr,WEBSQL:fn,LOCALSTORAGE:An},On=[Re.INDEXEDDB._driver,Re.WEBSQL._driver,Re.LOCALSTORAGE._driver],Ve=["dropInstance"],dt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ve),Tn={description:"",driver:On.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ln(r,o){r[o]=function(){var i=arguments;return r.ready().then(function(){return r[o].apply(r,i)})}}function ht(){for(var r=1;r<arguments.length;r++){var o=arguments[r];if(o)for(var i in o)o.hasOwnProperty(i)&&(Kt(o[i])?arguments[0][i]=o[i].slice():arguments[0][i]=o[i])}return arguments[0]}var Mn=function(){function r(o){p(this,r);for(var i in Re)if(Re.hasOwnProperty(i)){var l=Re[i],f=l._driver;this[i]=f,$e[f]||this.defineDriver(l)}this._defaultConfig=ht({},Tn),this._config=ht({},this._defaultConfig,o),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return r.prototype.config=function(i){if((typeof i=="undefined"?"undefined":g(i))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var l in i){if(l==="storeName"&&(i[l]=i[l].replace(/\W/g,"_")),l==="version"&&typeof i[l]!="number")return new Error("Database version must be a number.");this._config[l]=i[l]}return"driver"in i&&i.driver?this.setDriver(this._config.driver):!0}else return typeof i=="string"?this._config[i]:this._config},r.prototype.defineDriver=function(i,l,f){var u=new I(function(h,E){try{var b=i._driver,R=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!i._driver){E(R);return}for(var w=dt.concat("_initStorage"),T=0,B=w.length;T<B;T++){var k=w[T],Y=!Nn(Ve,k);if((Y||i[k])&&typeof i[k]!="function"){E(R);return}}var q=function(){for(var Pe=function(Cn){return function(){var Dn=new Error("Method "+Cn+" is not implemented by the current driver"),Vt=I.reject(Dn);return O(Vt,arguments[arguments.length-1]),Vt}},pt=0,Pn=Ve.length;pt<Pn;pt++){var mt=Ve[pt];i[mt]||(i[mt]=Pe(mt))}};q();var V=function(Pe){$e[b]&&console.info("Redefining LocalForage driver: "+b),$e[b]=i,Ht[b]=Pe,h()};"_support"in i?i._support&&typeof i._support=="function"?i._support().then(V,E):V(!!i._support):V(!0)}catch(ie){E(ie)}});return P(u,l,f),u},r.prototype.driver=function(){return this._driver||null},r.prototype.getDriver=function(i,l,f){var u=$e[i]?I.resolve($e[i]):I.reject(new Error("Driver not found."));return P(u,l,f),u},r.prototype.getSerializer=function(i){var l=I.resolve(ft);return P(l,i),l},r.prototype.ready=function(i){var l=this,f=l._driverSet.then(function(){return l._ready===null&&(l._ready=l._initDriver()),l._ready});return P(f,i,i),f},r.prototype.setDriver=function(i,l,f){var u=this;Kt(i)||(i=[i]);var h=this._getSupportedDrivers(i);function E(){u._config.driver=u.driver()}function b(T){return u._extend(T),E(),u._ready=u._initStorage(u._config),u._ready}function R(T){return function(){var B=0;function k(){for(;B<T.length;){var Y=T[B];return B++,u._dbInfo=null,u._ready=null,u.getDriver(Y).then(b).catch(k)}E();var q=new Error("No available storage method found.");return u._driverSet=I.reject(q),u._driverSet}return k()}}var w=this._driverSet!==null?this._driverSet.catch(function(){return I.resolve()}):I.resolve();return this._driverSet=w.then(function(){var T=h[0];return u._dbInfo=null,u._ready=null,u.getDriver(T).then(function(B){u._driver=B._driver,E(),u._wrapLibraryMethodsWithReady(),u._initDriver=R(h)})}).catch(function(){E();var T=new Error("No available storage method found.");return u._driverSet=I.reject(T),u._driverSet}),P(this._driverSet,l,f),this._driverSet},r.prototype.supports=function(i){return!!Ht[i]},r.prototype._extend=function(i){ht(this,i)},r.prototype._getSupportedDrivers=function(i){for(var l=[],f=0,u=i.length;f<u;f++){var h=i[f];this.supports(h)&&l.push(h)}return l},r.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,l=dt.length;i<l;i++)Ln(this,dt[i])},r.prototype.createInstance=function(i){return new r(i)},r}(),$n=new Mn;s.exports=$n},{"3":3}]},{},[4])(4)})});var Gr=Zt((ot,Fr)=>{(function(e,t){typeof ot=="object"&&typeof Fr!="undefined"?t(ot):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],t):t(e.LocalforageDriverMemory={})})(typeof self!="undefined"?self:ot,function(e){"use strict";var t="localforage-driver-memory";function n(d){var _=typeof Symbol=="function"&&d[Symbol.iterator],A=0;return _?_.call(d):{next:function(){return d&&A>=d.length&&(d=void 0),{value:d&&d[A++],done:!d}}}}function a(d,_){d=d||[],_=_||{};try{return new Blob(d,_)}catch(D){if(D.name!=="TypeError")throw D;for(var A=typeof BlobBuilder!="undefined"?BlobBuilder:typeof MSBlobBuilder!="undefined"?MSBlobBuilder:typeof MozBlobBuilder!="undefined"?MozBlobBuilder:WebKitBlobBuilder,M=new A,$=0;$<d.length;$+=1)M.append(d[$]);return M.getBlob(_.type)}}var s=/^~~local_forage_type~([^~]+)~/,c="__lfsc__:".length,g=c+"arbf".length,p=Object.prototype.toString;function m(d){var _=d.length*.75,A=d.length;d[d.length-1]==="="&&(_--,d[d.length-2]==="="&&_--);for(var M=new ArrayBuffer(_),$=new Uint8Array(M),D=0,j=0;D<A;D+=4){var Q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(d[D]),be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(d[D+1]),Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(d[D+2]),Me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(d[D+3]);$[j++]=Q<<2|be>>4,$[j++]=(be&15)<<4|Ee>>2,$[j++]=(Ee&3)<<6|Me&63}return M}function v(d){for(var _=new Uint8Array(d),A="",M=0;M<_.length;M+=3)A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[_[M]>>2],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(_[M]&3)<<4|_[M+1]>>4],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(_[M+1]&15)<<2|_[M+2]>>6],A+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[_[M+2]&63];return _.length%3===2?A=A.substring(0,A.length-1)+"=":_.length%3===1&&(A=A.substring(0,A.length-2)+"=="),A}function y(d,_){var A="";if(d&&(A=p.call(d)),d&&(A==="[object ArrayBuffer]"||d.buffer&&p.call(d.buffer)==="[object ArrayBuffer]")){var M=void 0,$="__lfsc__:";d instanceof ArrayBuffer?(M=d,$+="arbf"):(M=d.buffer,A==="[object Int8Array]"?$+="si08":A==="[object Uint8Array]"?$+="ui08":A==="[object Uint8ClampedArray]"?$+="uic8":A==="[object Int16Array]"?$+="si16":A==="[object Uint16Array]"?$+="ur16":A==="[object Int32Array]"?$+="si32":A==="[object Uint32Array]"?$+="ui32":A==="[object Float32Array]"?$+="fl32":A==="[object Float64Array]"?$+="fl64":_(new Error("Failed to get type for BinaryArray"))),_($+v(M))}else if(A==="[object Blob]"){var D=new FileReader;D.onload=function(){var j="~~local_forage_type~"+d.type+"~"+v(this.result);_("__lfsc__:blob"+j)},D.readAsArrayBuffer(d)}else try{_(JSON.stringify(d))}catch(j){console.error("Couldn't convert value into a JSON string: ",d),_(null,j)}}function N(d){if(d.substring(0,c)!=="__lfsc__:")return JSON.parse(d);var _=d.substring(g),A=d.substring(c,g),M;if(A==="blob"&&s.test(_)){var $=_.match(s);M=$[1],_=_.substring($[0].length)}var D=m(_);switch(A){case"arbf":return D;case"blob":return a([D],{type:M});case"si08":return new Int8Array(D);case"ui08":return new Uint8Array(D);case"uic8":return new Uint8ClampedArray(D);case"si16":return new Int16Array(D);case"ur16":return new Uint16Array(D);case"si32":return new Int32Array(D);case"ui32":return new Uint32Array(D);case"fl32":return new Float32Array(D);case"fl64":return new Float64Array(D);default:throw new Error("Unkown type: "+A)}}function I(d){var _,A;if(d===null||typeof d!="object"||"isActiveClone"in d)return d;var M=d instanceof Date?new Date(d):d.constructor();try{for(var $=n(Object.keys(d)),D=$.next();!D.done;D=$.next()){var j=D.value;Object.prototype.hasOwnProperty.call(d,j)&&(d.isActiveClone=null,M[j]=I(d[j]),delete d.isActiveClone)}}catch(Q){_={error:Q}}finally{try{D&&!D.done&&(A=$.return)&&A.call($)}finally{if(_)throw _.error}}return M}function O(d,_){return(d.name||_.name)+"/"+(d.storeName||_.storeName)+"/"}function P(d,_){_&&d.then(function(A){_(null,A)},function(A){_(A)})}function U(){for(var d=[],_=0;_<arguments.length;_++)d[_]=arguments[_];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}function L(d,_){var A=this;if(_=U.apply(this,arguments),d=typeof d!="function"&&d||{},!d.name){var M=this.config();d.name=d.name||M.name,d.storeName=d.storeName||M.storeName}var $;return d.name?$=new Promise(function(D){d.storeName?D(O(d,A._defaultConfig)):D(d.name+"/")}):$=Promise.reject("Invalid arguments"),{promise:$,callback:_}}function F(d){return typeof d!="string"&&(console.warn(d+" used as a key, but it is not a string."),d=String(d)),d}var X={bufferToString:v,deserialize:N,serialize:y,stringToBuffer:m},C={},pe=function(){function d(_){this.kp=_,this.data={}}return d.resolve=function(_){return C[_]||(C[_]=new d(_)),C[_]},d.prototype.clear=function(){this.data={}},d.prototype.drop=function(){this.clear(),delete C[this.kp]},d.prototype.get=function(_){return this.data[_]},d.prototype.key=function(_){return this.keys()[_]},d.prototype.keys=function(){return Object.keys(this.data)},d.prototype.rm=function(_){delete this.data[_]},d.prototype.set=function(_,A){this.data[_]=A},d}();function re(d){var _=d?I(d):{},A=O(_,this._defaultConfig),M=pe.resolve(A);return this._dbInfo=_,this._dbInfo.serializer=X,this._dbInfo.keyPrefix=A,this._dbInfo.mStore=M,Promise.resolve()}function S(d){var _=this,A=this.ready().then(function(){_._dbInfo.mStore.clear()});return P(A,d),A}function G(d,_){var A=L.apply(this,arguments),M=A.promise,$=A.callback,D=M.then(function(j){pe.resolve(j).drop()});return P(D,$),M}function x(d,_){var A=this;d=F(d);var M=this.ready().then(function(){var $=A._dbInfo.mStore.get(d);return $==null?null:A._dbInfo.serializer.deserialize($)});return P(M,_),M}function W(d,_){var A=this,M=this.ready().then(function(){for(var $=A._dbInfo.mStore,D=$.keys(),j=0;j<D.length;j++){var Q=$.get(D[j]);if(Q&&(Q=A._dbInfo.serializer.deserialize(Q)),Q=d(Q,D[j],j+1),Q!==void 0)return Q}});return P(M,_),M}function z(d,_){var A=this,M=this.ready().then(function(){var $;try{$=A._dbInfo.mStore.key(d),$===void 0&&($=null)}catch{$=null}return $});return P(M,_),M}function ne(d){var _=this,A=this.ready().then(function(){return _._dbInfo.mStore.keys()});return P(A,d),A}function ae(d){var _=this.keys().then(function(A){return A.length});return P(_,d),_}function se(d,_){var A=this;d=F(d);var M=this.ready().then(function(){A._dbInfo.mStore.rm(d)});return P(M,_),M}function ce(d,_,A){var M=this;d=F(d);var $=this.ready().then(function(){_===void 0&&(_=null);var D=_;return new Promise(function(j,Q){M._dbInfo.serializer.serialize(_,function(be,Ee){if(Ee)Q(Ee);else try{M._dbInfo.mStore.set(d,be),j(D)}catch(Me){Q(Me)}})})});return P($,A),$}var ye=!0;e._support=ye,e._driver=t,e._initStorage=re,e.clear=S,e.dropInstance=G,e.getItem=x,e.iterate=W,e.key=z,e.keys=ne,e.length=ae,e.removeItem=se,e.setItem=ce,Object.defineProperty(e,"__esModule",{value:!0})})});var Go={};er(Go,{default:()=>Fo});var le=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(le||{}),Ae=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e))(Ae||{}),Se=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e))(Se||{}),H=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_auth_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e))(H||{}),fe=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e))(fe||{}),_e=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e))(_e||{}),nr=(e=>(e.Harmony="HARMONY",e))(nr||{});var kn=Object.create,xe=Object.defineProperty,Wn=Object.defineProperties,Yn=Object.getOwnPropertyDescriptor,Kn=Object.getOwnPropertyDescriptors,Hn=Object.getOwnPropertyNames,ir=Object.getOwnPropertySymbols,Vn=Object.getPrototypeOf,or=Object.prototype.hasOwnProperty,Xn=Object.prototype.propertyIsEnumerable,ar=(e,t,n)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zn=(e,t)=>{for(var n in t||(t={}))or.call(t,n)&&ar(e,n,t[n]);if(ir)for(var n of ir(t))Xn.call(t,n)&&ar(e,n,t[n]);return e},qn=(e,t)=>Wn(e,Kn(t)),Jn=e=>xe(e,"__esModule",{value:!0}),Qn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Zn=(e,t)=>{for(var n in t)xe(e,n,{get:t[n],enumerable:!0})},ei=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Hn(t))!or.call(e,s)&&(n||s!=="default")&&xe(e,s,{get:()=>t[s],enumerable:!(a=Yn(t,s))||a.enumerable});return e},ti=(e,t)=>ei(Jn(xe(e!=null?kn(Vn(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),de=(e,t,n)=>new Promise((a,s)=>{var c=m=>{try{p(n.next(m))}catch(v){s(v)}},g=m=>{try{p(n.throw(m))}catch(v){s(v)}},p=m=>m.done?a(m.value):Promise.resolve(m.value).then(c,g);p((n=n.apply(e,t)).next())}),ri=Qn((e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty,a="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(a=!1));function c(v,y,N){this.fn=v,this.context=y,this.once=N||!1}function g(v,y,N,I,O){if(typeof N!="function")throw new TypeError("The listener must be a function");var P=new c(N,I||v,O),U=a?a+y:y;return v._events[U]?v._events[U].fn?v._events[U]=[v._events[U],P]:v._events[U].push(P):(v._events[U]=P,v._eventsCount++),v}function p(v,y){--v._eventsCount===0?v._events=new s:delete v._events[y]}function m(){this._events=new s,this._eventsCount=0}m.prototype.eventNames=function(){var v=[],y,N;if(this._eventsCount===0)return v;for(N in y=this._events)n.call(y,N)&&v.push(a?N.slice(1):N);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(y)):v},m.prototype.listeners=function(v){var y=a?a+v:v,N=this._events[y];if(!N)return[];if(N.fn)return[N.fn];for(var I=0,O=N.length,P=new Array(O);I<O;I++)P[I]=N[I].fn;return P},m.prototype.listenerCount=function(v){var y=a?a+v:v,N=this._events[y];return N?N.fn?1:N.length:0},m.prototype.emit=function(v,y,N,I,O,P){var U=a?a+v:v;if(!this._events[U])return!1;var L=this._events[U],F=arguments.length,X,C;if(L.fn){switch(L.once&&this.removeListener(v,L.fn,void 0,!0),F){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,y),!0;case 3:return L.fn.call(L.context,y,N),!0;case 4:return L.fn.call(L.context,y,N,I),!0;case 5:return L.fn.call(L.context,y,N,I,O),!0;case 6:return L.fn.call(L.context,y,N,I,O,P),!0}for(C=1,X=new Array(F-1);C<F;C++)X[C-1]=arguments[C];L.fn.apply(L.context,X)}else{var pe=L.length,re;for(C=0;C<pe;C++)switch(L[C].once&&this.removeListener(v,L[C].fn,void 0,!0),F){case 1:L[C].fn.call(L[C].context);break;case 2:L[C].fn.call(L[C].context,y);break;case 3:L[C].fn.call(L[C].context,y,N);break;case 4:L[C].fn.call(L[C].context,y,N,I);break;default:if(!X)for(re=1,X=new Array(F-1);re<F;re++)X[re-1]=arguments[re];L[C].fn.apply(L[C].context,X)}}return!0},m.prototype.on=function(v,y,N){return g(this,v,y,N,!1)},m.prototype.once=function(v,y,N){return g(this,v,y,N,!0)},m.prototype.removeListener=function(v,y,N,I){var O=a?a+v:v;if(!this._events[O])return this;if(!y)return p(this,O),this;var P=this._events[O];if(P.fn)P.fn===y&&(!I||P.once)&&(!N||P.context===N)&&p(this,O);else{for(var U=0,L=[],F=P.length;U<F;U++)(P[U].fn!==y||I&&!P[U].once||N&&P[U].context!==N)&&L.push(P[U]);L.length?this._events[O]=L.length===1?L[0]:L:p(this,O)}return this},m.prototype.removeAllListeners=function(v){var y;return v?(y=a?a+v:v,this._events[y]&&p(this,y)):(this._events=new s,this._eventsCount=0),this},m.prototype.off=m.prototype.removeListener,m.prototype.addListener=m.prototype.on,m.prefixed=a,m.EventEmitter=m,typeof t!="undefined"&&(t.exports=m)});function ni(e){let t={exports:{}};return e(t,t.exports),t.exports}var ii=Number.MAX_SAFE_INTEGER||9007199254740991,vt={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:ii,MAX_SAFE_COMPONENT_LENGTH:16},oi=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},K=oi,Ue=ni(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:n}=vt,a=(t=e.exports={}).re=[],s=t.src=[],c=t.t={},g=0,p=(m,v,y)=>{let N=g++;K(N,v),c[m]=N,s[N]=v,a[N]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","[0-9]+"),p("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),p("MAINVERSION",`(${s[c.NUMERICIDENTIFIER]})\\.(${s[c.NUMERICIDENTIFIER]})\\.(${s[c.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${s[c.NUMERICIDENTIFIERLOOSE]})\\.(${s[c.NUMERICIDENTIFIERLOOSE]})\\.(${s[c.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${s[c.NUMERICIDENTIFIER]}|${s[c.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${s[c.NUMERICIDENTIFIERLOOSE]}|${s[c.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${s[c.PRERELEASEIDENTIFIER]}(?:\\.${s[c.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${s[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[c.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER","[0-9A-Za-z-]+"),p("BUILD",`(?:\\+(${s[c.BUILDIDENTIFIER]}(?:\\.${s[c.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${s[c.MAINVERSION]}${s[c.PRERELEASE]}?${s[c.BUILD]}?`),p("FULL",`^${s[c.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${s[c.MAINVERSIONLOOSE]}${s[c.PRERELEASELOOSE]}?${s[c.BUILD]}?`),p("LOOSE",`^${s[c.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${s[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${s[c.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${s[c.XRANGEIDENTIFIER]})(?:\\.(${s[c.XRANGEIDENTIFIER]})(?:\\.(${s[c.XRANGEIDENTIFIER]})(?:${s[c.PRERELEASE]})?${s[c.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${s[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[c.XRANGEIDENTIFIERLOOSE]})(?:${s[c.PRERELEASELOOSE]})?${s[c.BUILD]}?)?)?`),p("XRANGE",`^${s[c.GTLT]}\\s*${s[c.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${s[c.GTLT]}\\s*${s[c.XRANGEPLAINLOOSE]}$`),p("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),p("COERCERTL",s[c.COERCE],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${s[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${s[c.LONETILDE]}${s[c.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${s[c.LONETILDE]}${s[c.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${s[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${s[c.LONECARET]}${s[c.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${s[c.LONECARET]}${s[c.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${s[c.GTLT]}\\s*(${s[c.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${s[c.GTLT]}\\s*(${s[c.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${s[c.GTLT]}\\s*(${s[c.LOOSEPLAIN]}|${s[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${s[c.XRANGEPLAIN]})\\s+-\\s+(${s[c.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${s[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[c.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0.0.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),sr=/^[0-9]+$/,ur=(e,t)=>{let n=sr.test(e),a=sr.test(t);return n&&a&&(e=+e,t=+t),e===t?0:n&&!a?-1:a&&!n?1:e<t?-1:1},ai=(e,t)=>ur(t,e),si={compareIdentifiers:ur,rcompareIdentifiers:ai},{MAX_LENGTH:cr,MAX_SAFE_INTEGER:Xe}=vt,{re:lr,t:fr}=Ue,{compareIdentifiers:Be}=si,Z=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Z){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>cr)throw new TypeError(`version is longer than ${cr} characters`);K("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=e.trim().match(t.loose?lr[fr.LOOSE]:lr[fr.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Xe||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Xe||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Xe||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){let s=+a;if(s>=0&&s<Xe)return s}return a}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(K("SemVer.compare",this.version,this.options,e),!(e instanceof Z)){if(typeof e=="string"&&e===this.version)return 0;e=new Z(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Z||(e=new Z(e,this.options)),Be(this.major,e.major)||Be(this.minor,e.minor)||Be(this.patch,e.patch)}comparePre(e){if(e instanceof Z||(e=new Z(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],a=e.prerelease[t];if(K("prerelease compare",t,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n!==a)return Be(n,a)}while(++t)}compareBuild(e){e instanceof Z||(e=new Z(e,this.options));let t=0;do{let n=this.build[t],a=e.build[t];if(K("prerelease compare",t,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n!==a)return Be(n,a)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}},ui=(e,t,n)=>new Z(e,n).compare(new Z(t,n)),Ne=ui,ci=(e,t,n)=>Ne(e,t,n)===0,li=ci,fi=(e,t,n)=>Ne(e,t,n)!==0,di=fi,hi=(e,t,n)=>Ne(e,t,n)>0,pi=hi,mi=(e,t,n)=>Ne(e,t,n)>=0,vi=mi,gi=(e,t,n)=>Ne(e,t,n)<0,yi=gi,Ei=(e,t,n)=>Ne(e,t,n)<=0,_i=Ei,Ii=(e,t,n,a)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return li(e,n,a);case"!=":return di(e,n,a);case">":return pi(e,n,a);case">=":return vi(e,n,a);case"<":return yi(e,n,a);case"<=":return _i(e,n,a);default:throw new TypeError(`Invalid operator: ${t}`)}},gt=Ii,Fe=Symbol("SemVer ANY"),Ge=class{static get ANY(){return Fe}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Ge){if(e.loose===!!t.loose)return e;e=e.value}K("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Fe?this.value="":this.value=this.operator+this.semver.version,K("comp",this)}parse(e){let t=this.options.loose?dr[hr.COMPARATORLOOSE]:dr[hr.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Z(n[2],this.options.loose):this.semver=Fe}toString(){return this.value}test(e){if(K("Comparator.test",e,this.options.loose),this.semver===Fe||e===Fe)return!0;if(typeof e=="string")try{e=new Z(e,this.options)}catch(t){return!1}return gt(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Ge))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new Oe(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new Oe(this.value,t).test(e.semver);let n=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),a=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),s=this.semver.version===e.semver.version,c=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),g=gt(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),p=gt(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||a||s&&c||g||p}},{re:dr,t:hr}=Ue,Oe=class{constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Oe)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Oe(e.raw,t);if(e instanceof Ge)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let{loose:t}=this.options;e=e.trim();let n=t?te[ee.HYPHENRANGELOOSE]:te[ee.HYPHENRANGE];e=e.replace(n,Ci(this.options.includePrerelease)),K("hyphen replace",e),e=e.replace(te[ee.COMPARATORTRIM],bi),K("comparator trim",e,te[ee.COMPARATORTRIM]),e=(e=(e=e.replace(te[ee.TILDETRIM],Ri)).replace(te[ee.CARETTRIM],wi)).split(/\s+/).join(" ");let a=t?te[ee.COMPARATORLOOSE]:te[ee.COMPARATOR];return e.split(" ").map(s=>Ai(s,this.options)).join(" ").split(/\s+/).map(s=>Pi(s,this.options)).filter(this.options.loose?s=>!!s.match(a):()=>!0).map(s=>new Ge(s,this.options))}intersects(e,t){if(!(e instanceof Oe))throw new TypeError("a Range is required");return this.set.some(n=>pr(n,t)&&e.set.some(a=>pr(a,t)&&n.every(s=>a.every(c=>s.intersects(c,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Z(e,this.options)}catch(t){return!1}for(let t=0;t<this.set.length;t++)if(Di(this.set[t],e,this.options))return!0;return!1}},{re:te,t:ee,comparatorTrimReplace:bi,tildeTrimReplace:Ri,caretTrimReplace:wi}=Ue,pr=(e,t)=>{let n=!0,a=e.slice(),s=a.pop();for(;n&&a.length;)n=a.every(c=>s.intersects(c,t)),s=a.pop();return n},Ai=(e,t)=>(K("comp",e,t),e=Oi(e,t),K("caret",e),e=Si(e,t),K("tildes",e),e=Li(e,t),K("xrange",e),e=$i(e,t),K("stars",e),e),oe=e=>!e||e.toLowerCase()==="x"||e==="*",Si=(e,t)=>e.trim().split(/\s+/).map(n=>Ni(n,t)).join(" "),Ni=(e,t)=>{let n=t.loose?te[ee.TILDELOOSE]:te[ee.TILDE];return e.replace(n,(a,s,c,g,p)=>{let m;return K("tilde",e,a,s,c,g,p),oe(s)?m="":oe(c)?m=`>=${s}.0.0 <${+s+1}.0.0-0`:oe(g)?m=`>=${s}.${c}.0 <${s}.${+c+1}.0-0`:p?(K("replaceTilde pr",p),m=`>=${s}.${c}.${g}-${p} <${s}.${+c+1}.0-0`):m=`>=${s}.${c}.${g} <${s}.${+c+1}.0-0`,K("tilde return",m),m})},Oi=(e,t)=>e.trim().split(/\s+/).map(n=>Ti(n,t)).join(" "),Ti=(e,t)=>{K("caret",e,t);let n=t.loose?te[ee.CARETLOOSE]:te[ee.CARET],a=t.includePrerelease?"-0":"";return e.replace(n,(s,c,g,p,m)=>{let v;return K("caret",e,s,c,g,p,m),oe(c)?v="":oe(g)?v=`>=${c}.0.0${a} <${+c+1}.0.0-0`:oe(p)?v=c==="0"?`>=${c}.${g}.0${a} <${c}.${+g+1}.0-0`:`>=${c}.${g}.0${a} <${+c+1}.0.0-0`:m?(K("replaceCaret pr",m),v=c==="0"?g==="0"?`>=${c}.${g}.${p}-${m} <${c}.${g}.${+p+1}-0`:`>=${c}.${g}.${p}-${m} <${c}.${+g+1}.0-0`:`>=${c}.${g}.${p}-${m} <${+c+1}.0.0-0`):(K("no pr"),v=c==="0"?g==="0"?`>=${c}.${g}.${p}${a} <${c}.${g}.${+p+1}-0`:`>=${c}.${g}.${p}${a} <${c}.${+g+1}.0-0`:`>=${c}.${g}.${p} <${+c+1}.0.0-0`),K("caret return",v),v})},Li=(e,t)=>(K("replaceXRanges",e,t),e.split(/\s+/).map(n=>Mi(n,t)).join(" ")),Mi=(e,t)=>{e=e.trim();let n=t.loose?te[ee.XRANGELOOSE]:te[ee.XRANGE];return e.replace(n,(a,s,c,g,p,m)=>{K("xRange",e,a,s,c,g,p,m);let v=oe(c),y=v||oe(g),N=y||oe(p),I=N;return s==="="&&I&&(s=""),m=t.includePrerelease?"-0":"",v?a=s===">"||s==="<"?"<0.0.0-0":"*":s&&I?(y&&(g=0),p=0,s===">"?(s=">=",y?(c=+c+1,g=0,p=0):(g=+g+1,p=0)):s==="<="&&(s="<",y?c=+c+1:g=+g+1),s==="<"&&(m="-0"),a=`${s+c}.${g}.${p}${m}`):y?a=`>=${c}.0.0${m} <${+c+1}.0.0-0`:N&&(a=`>=${c}.${g}.0${m} <${c}.${+g+1}.0-0`),K("xRange return",a),a})},$i=(e,t)=>(K("replaceStars",e,t),e.trim().replace(te[ee.STAR],"")),Pi=(e,t)=>(K("replaceGTE0",e,t),e.trim().replace(te[t.includePrerelease?ee.GTE0PRE:ee.GTE0],"")),Ci=e=>(t,n,a,s,c,g,p,m,v,y,N,I,O)=>`${n=oe(a)?"":oe(s)?`>=${a}.0.0${e?"-0":""}`:oe(c)?`>=${a}.${s}.0${e?"-0":""}`:g?`>=${n}`:`>=${n}${e?"-0":""}`} ${m=oe(v)?"":oe(y)?`<${+v+1}.0.0-0`:oe(N)?`<${v}.${+y+1}.0-0`:I?`<=${v}.${y}.${N}-${I}`:e?`<${v}.${y}.${+N+1}-0`:`<=${m}`}`.trim(),Di=(e,t,n)=>{for(let a=0;a<e.length;a++)if(!e[a].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let a=0;a<e.length;a++)if(K(e[a].semver),e[a].semver!==Ge.ANY&&e[a].semver.prerelease.length>0){let s=e[a].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0},xi=(e,t,n)=>{try{t=new Oe(t,n)}catch(a){return!1}return t.test(e)},{MAX_LENGTH:Ui}=vt,{re:mr,t:vr}=Ue,Bi=(e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Z)return e;if(typeof e!="string"||e.length>Ui||!(t.loose?mr[vr.LOOSE]:mr[vr.FULL]).test(e))return null;try{return new Z(e,t)}catch(n){return null}},Fi=Bi,{re:ze,t:qe}=Ue,Gi=(e,t)=>{if(e instanceof Z)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let n=null;if((t=t||{}).rtl){let a;for(;(a=ze[qe.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&a.index+a[0].length===n.index+n[0].length||(n=a),ze[qe.COERCERTL].lastIndex=a.index+a[1].length+a[2].length;ze[qe.COERCERTL].lastIndex=-1}else n=e.match(ze[qe.COERCE]);return n===null?null:Fi(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};function ji(e){return String.fromCharCode(parseInt(e.slice(1),16))}function ki(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function Wi(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,ji))}function Yi(e){return decodeURIComponent(Array.from(atob(e),ki).join(""))}function gr(e){return Wi(JSON.stringify(e))}function Ki(e){return JSON.parse(Yi(e))}function je(e){return typeof e=="undefined"}function Hi(e){return e===null}function yr(e){return Hi(e)||je(e)}function Vi(e){return yr(e)?!1:!je(e.jsonrpc)&&!je(e.id)&&(!je(e.result)||!je(e.error))}function Xi(e){return yr(e)?!1:typeof e=="number"&&Object.values(Se).includes(e)}function yt(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var J={};function Er(e,t){return Object.assign(J,t),e}var zi={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn"},he=class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`);this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,he.prototype)}},Te=class extends Error{constructor(e){super();this.__proto__=Error;let t=Number(e==null?void 0:e.code);this.rawMessage=(e==null?void 0:e.message)||"Internal error",this.code=Xi(t)?t:Se.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,Object.setPrototypeOf(this,Te.prototype)}},ke=class{constructor(e,t){this.code=e,this.rawMessage=t,this.message=`Magic SDK Warning: [${e}] ${t}`}log(){console.warn(this.message)}},Je=class extends Error{constructor(e,t,n,a){super(`Magic Extension Error (${e.name}): [${t}] ${n}`);this.code=t,this.rawMessage=n,this.data=a,this.__proto__=Error,Object.setPrototypeOf(this,Je.prototype)}},Qe=class{constructor(e,t,n){this.code=t,this.rawMessage=n,this.message=`Magic Extension Warning (${e.name}): [${t}] ${n}`}log(){console.warn(this.message)}};function qi(){return new he(le.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function _r(){return new he(le.ModalNotReady,"Modal is not ready.")}function Ji(){return new he(le.MalformedResponse,"Response from the Magic iframe is malformed.")}function Qi(e){return new he(le.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function Zi(e){let t=`Some extensions are incompatible with \`${J.sdkName}@${J.version}\`:`;return e.filter(n=>typeof n.compat!="undefined"&&n.compat!==null).forEach(n=>{let a=n.compat[J.sdkName];typeof a=="string"?t+=`
  - Extension \`${n.name}\` supports version(s) \`${a}\``:a||(t+=`
  - Extension \`${n.name}\` does not support ${J.platform} environments.`)}),new he(le.IncompatibleExtensions,t)}function eo(e){let t=n=>{let a=n+1,s=a%10,c=a%100;return s===1&&c!==11?`${a}st`:s===2&&c!==12?`${a}nd`:s===3&&c!==13?`${a}rd`:`${a}th`};return new he(le.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}function Ir(){return new ke(Ae.DuplicateIframe,"Duplicate iframes found.")}function to(){return new ke(Ae.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function ro(){return new ke(Ae.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${J.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}function*no(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}var io=no();function br(){return io.next().value}var Rr=Symbol("Payload pre-processed by Magic SDK");function wr(e){return Object.defineProperty(e,Rr,{value:!0,enumerable:!1}),e}function oo(e){return!!e[Rr]}function Ze(e){var t,n,a;return oo(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=br(),e.method=(n=e.method)!=null?n:"noop",e.params=(a=e.params)!=null?a:[],wr(e)),e}function ue(e,t=[]){return wr({params:t,method:e,jsonrpc:"2.0",id:br()})}var Et=class{constructor(e){e instanceof Et?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):Vi(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error!="undefined"&&this._error!==null}get hasResult(){return typeof this._result!="undefined"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},ao=ti(ri()),so=class extends ao.default{};function Ar(){let e=new so;return{emitter:e,createChainingEmitterMethod:(t,n)=>(...a)=>(e[t].apply(e,a),n),createBoundEmitterMethod:t=>(...n)=>e[t].apply(e,n)}}var Sr=Symbol("isPromiEvent");function _t(e){return!!e[Sr]}function Nr(e){let t=Or(e),{createBoundEmitterMethod:n,createChainingEmitterMethod:a}=Ar(),s=Symbol("Promise.then"),c=Symbol("Promise.catch"),g=Symbol("Promise.finally"),p=(y,N)=>(...I)=>{let O=N[y].apply(N,I);return m(O)},m=y=>Object.assign(y,{[Sr]:!0,[s]:y[s]||y.then,[c]:y[c]||y.catch,[g]:y[g]||y.finally,then:p(s,y),catch:p(c,y),finally:p(g,y),on:a("on",y),once:a("once",y),addListener:a("addListener",y),off:a("off",y),removeListener:a("removeListener",y),removeAllListeners:a("removeAllListeners",y),emit:n("emit"),eventNames:n("eventNames"),listeners:n("listeners"),listenerCount:n("listenerCount")}),v=m(t.then(y=>(v.emit("done",y),v.emit("settled"),y),y=>{throw v.emit("error",y),v.emit("settled"),y}));return v}function Or(e){return new Promise((t,n)=>{let a=e(t,n);Promise.resolve(a).catch(n)})}var We=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(_e.MAGIC_HANDLE_REQUEST,Ze(e)),n=Nr((s,c)=>{t.then(g=>{if(a(),g.hasError)c(new Te(g.payload.error));else if(g.hasResult)s(g.payload.result);else throw Ji()}).catch(g=>{a(),c(g)})}),a=this.overlay.on(fe.MAGIC_HANDLE_EVENT,s=>{var c;let{response:g}=s.data;if(g.id===e.id&&((c=g.result)==null?void 0:c.event)){let{event:p,params:m=[]}=g.result;n.emit(p,...m)}});return n}},uo=class extends We{loginWithMagicLink(e){let{email:t,showUI:n=!0,redirectURI:a}=e,s=ue(this.sdk.testMode?H.LoginWithMagicLinkTestMode:H.LoginWithMagicLink,[{email:t,showUI:n,redirectURI:a}]);return this.request(s)}loginWithSMS(e){let{phoneNumber:t}=e,n=ue(this.sdk.testMode?H.LoginWithSmsTestMode:H.LoginWithSms,[{phoneNumber:t,showUI:!0}]);return this.request(n)}loginWithCredential(e){let t=e!=null?e:"";if(!e&&J.platform==="web"){t=window.location.search;let a=window.location.origin+window.location.pathname;window.history.replaceState(null,"",a)}let n=ue(this.sdk.testMode?H.LoginWithCredentialTestMode:H.LoginWithCredential,[t]);return this.request(n)}},Tr={};Zn(Tr,{clear:()=>co,getItem:()=>Ye,iterate:()=>po,key:()=>fo,keys:()=>ho,length:()=>lo,removeItem:()=>It,setItem:()=>tt});var et;function ge(e){return(...t)=>de(this,null,function*(){return et||(et=yield J.configureStorage()),yield et.ready(),et[e](...t)})}var Ye=ge("getItem"),tt=ge("setItem"),It=ge("removeItem"),co=ge("clear"),lo=ge("length"),fo=ge("key"),ho=ge("keys"),po=ge("iterate");function mo(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var bt="STORE_KEY_PRIVATE_KEY",rt="STORE_KEY_PUBLIC_JWK",Rt="ECDSA",Lr="P-256",vo={name:Rt,namedCurve:Lr},go={name:Rt,namedCurve:Lr};function yo(){It(rt),It(bt)}function Eo(){return de(this,null,function*(){let e=yield _o();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,n=yield Ye(bt);if(!n||!t){console.info("unable to find private key or webcrypto unsupported");return}let a={iat:Math.floor(new Date().getTime()/1e3),jti:mo()},s={typ:"dpop+jwt",alg:"ES256",jwk:e},c={protected:Mr(JSON.stringify(s)),claims:Mr(JSON.stringify(a))},g=Ro(`${c.protected}.${c.claims}`),p={name:Rt,hash:{name:"SHA-256"}},m=Ao(new Uint8Array(yield t.sign(p,n,g)));return`${c.protected}.${c.claims}.${m}`})}function _o(){return de(this,null,function*(){if(!bo()){console.info("webcrypto is not supported");return}return(yield Ye(rt))||(yield Io()),Ye(rt)})}function Io(){return de(this,null,function*(){let e=null,{subtle:t}=window.crypto,n=yield t.generateKey(vo,!0,["sign"]),a=yield t.exportKey("jwk",n.privateKey);e=yield t.exportKey("jwk",n.publicKey);let s=yield t.importKey("jwk",a,go,!1,["sign"]);yield tt(bt,s),yield tt(rt,e)})}function bo(){let e=typeof window!="undefined"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}function Mr(e){return $r(wo(e))}function Ro(e){return new TextEncoder().encode(e)}function $r(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function wo(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,n)=>String.fromCharCode(parseInt(n,16)))}function Ao(e){let t="";return e.forEach(n=>{t+=String.fromCharCode(n)}),$r(t)}var So=class extends We{getIdToken(e){let t=ue(this.sdk.testMode?H.GetIdTokenTestMode:H.GetIdToken,[e]);return this.request(t)}generateIdToken(e){let t=ue(this.sdk.testMode?H.GenerateIdTokenTestMode:H.GenerateIdToken,[e]);return this.request(t)}getMetadata(){let e=ue(this.sdk.testMode?H.GetMetadataTestMode:H.GetMetadata);return this.request(e)}updateEmail(e){let{email:t,showUI:n=!0}=e,a=ue(this.sdk.testMode?H.UpdateEmailTestMode:H.UpdateEmail,[{email:t,showUI:n}]);return this.request(a)}isLoggedIn(){let e=ue(this.sdk.testMode?H.IsLoggedInTestMode:H.IsLoggedIn);return this.request(e)}logout(){yo();let e=ue(this.sdk.testMode?H.LogoutTestMode:H.Logout);return this.request(e)}showSettings(){let e=ue(this.sdk.testMode?H.UserSettingsTestMode:H.UserSettings);return this.request(e)}},{createBoundEmitterMethod:nt,createChainingEmitterMethod:Le}=Ar(),No=class extends We{constructor(){super(...arguments);this.isMagic=!0,this.on=Le("on",this),this.once=Le("once",this),this.addListener=Le("addListener",this),this.off=Le("off",this),this.removeListener=Le("removeListener",this),this.removeAllListeners=Le("removeAllListeners",this),this.emit=nt("emit"),this.eventNames=nt("eventNames"),this.listeners=nt("listeners"),this.listenerCount=nt("listenerCount")}sendAsync(e,t){if(!t)throw eo({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(_e.MAGIC_HANDLE_REQUEST,e.map(n=>{let a=Ze(n);return this.prefixPayloadMethodForTestMode(a),a})).then(n=>{t(null,n.map(a=>qn(zn({},a.payload),{error:a.hasError?new Te(a.payload.error):null})))});else{let n=Ze(e);this.prefixPayloadMethodForTestMode(n),this.overlay.post(_e.MAGIC_HANDLE_REQUEST,n).then(a=>{t(a.hasError?new Te(a.payload.error):null,a.payload)})}}send(e,t){if(typeof e=="string"){let a=ue(e,Array.isArray(t)?t:[]);return this.request(a)}if(Array.isArray(e)||!!t){this.sendAsync(e,t);return}let n=to();return n.log(),new Et(e).applyError({code:-32603,message:n.rawMessage}).payload}enable(){let e=ue("eth_accounts");return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}};function Ke(e,t){return t?new URL(e,t):new URL(e)}var Pr=["request","overlay","sdk"];function Oo(e){let t=Object.getPrototypeOf(e),n=[t];for(;t!==We.prototype;)t=Object.getPrototypeOf(t),n.push(t);return n}var Cr=class extends We{constructor(){super(void 0);this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:Nr,isPromiEvent:_t,encodeJSON:gr,decodeJSON:Ki,createJsonRpcRequestPayload:ue,standardizeJsonRpcRequestPayload:Ze,storage:Tr};let e=[this,...Oo(this)];Pr.forEach(t=>{let n=e.map(g=>Object.getOwnPropertyDescriptor(g,t)),a=n.findIndex(g=>!!g),s=a>0,c=n[a];c&&(this.__sdk_access_field_descriptors__.set(t,{descriptor:c,isPrototypeField:s}),Object.defineProperty(this,t,{configurable:!0,get:()=>{throw Qi(t)}}))})}init(e){this.__is_initialized__||(Pr.forEach(t=>{if(this.__sdk_access_field_descriptors__.has(t)){let{descriptor:n,isPrototypeField:a}=this.__sdk_access_field_descriptors__.get(t);a?delete this[t]:Object.defineProperty(this,t,n)}}),this.sdk=e,this.__is_initialized__=!0)}createDeprecationWarning(e){let{method:t,removalVersion:n,useInstead:a}=e,s=a?` Use \`${a}\` instead.`:"",c=`\`${t}\` will be removed from this Extension in version \`${n}\`.${s}`;return new Qe(this,"DEPRECATION_NOTICE",c)}createWarning(e,t){return new Qe(this,e,t)}createError(e,t,n){return new Je(this,e,t,n)}},To=class extends Cr{},Ie=class extends Cr{};Ie.Internal=To,Ie.Anonymous="anonymous extension";function Dr(e){return e.compat&&e.compat[J.sdkName]!=null?typeof e.compat[J.sdkName]=="string"?xi(Gi(J.version),e.compat[J.sdkName]):!!e.compat[J.sdkName]:!0}function Lo(e){var t;let n=(t=e==null?void 0:e.extensions)!=null?t:[],a={},s=[];if(Array.isArray(n)?n.forEach(c=>{Dr(c)?(c.init(this),(c.name||c.name!==Ie.Anonymous)&&(this[c.name]=c),c instanceof Ie.Internal&&(yt(c.config)||(a[c.name]=c.config))):s.push(c)}):Object.keys(n).forEach(c=>{if(Dr(n[c])){n[c].init(this);let g=n[c];this[c]=g,g instanceof Ie.Internal&&(yt(g.config)||(a[n[c].name]=g.config))}else s.push(n[c])}),s.length)throw Zi(s);return a}var it=class{constructor(e,t){this.apiKey=e;var n;if(!e)throw qi();J.platform==="react-native"&&(t==null?void 0:t.endpoint)&&ro().log();let{defaultEndpoint:a,version:s}=J;this.testMode=!!(t==null?void 0:t.testMode),this.endpoint=Ke((n=t==null?void 0:t.endpoint)!=null?n:a).origin,this.auth=new uo(this),this.user=new So(this),this.rpcProvider=new No(this);let c=Lo.call(this,t);this.parameters=gr({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:t==null?void 0:t.network,host:Ke(this.endpoint).host,sdk:zi[J.sdkName],version:s,ext:yt(c)?void 0:c,locale:(t==null?void 0:t.locale)||"en_US"})}get overlay(){if(!it.__overlays__.has(this.parameters)){let e=new J.ViewController(this.endpoint,this.parameters);e.init(),it.__overlays__.set(this.parameters,e)}return it.__overlays__.get(this.parameters)}preload(){return de(this,null,function*(){yield this.overlay.ready})}},wt=it;wt.__overlays__=new Map;function Mo(e,t){return t&&Array.isArray(e)?e.find(n=>n.id===t):e}function $o(e,t){var n;let a=(n=t.data.response)==null?void 0:n.id,s=Mo(e,a);if(a&&s){let c=new Et(s).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:a,response:c}}return{}}function Po(e,t){return de(this,null,function*(){let n=yield Ye("rt"),a;if(J.platform==="web")try{a=yield Eo()}catch(s){console.error("webcrypto error",s)}return a?n?{msgType:e,payload:t,jwt:a,rt:n}:{msgType:e,payload:t,jwt:a}:{msgType:e,payload:t}})}function Co(e){return de(this,null,function*(){!e.data.rt||(yield tt("rt",e.data.rt))})}var xr=class{constructor(e,t){this.endpoint=e,this.parameters=t,this.messageHandlers=new Set,this.ready=this.waitForReady(),this.listen()}post(e,t){return de(this,null,function*(){return Or(n=>de(this,null,function*(){yield this.ready;let a=[],s=Array.isArray(t)?t.map(m=>m.id):[],c=yield Po(`${e}-${this.parameters}`,t);yield this._post(c);let g=m=>v=>{let{id:y,response:N}=$o(t,v);Co(v),y&&N&&Array.isArray(t)&&s.includes(y)?(a.push(N),a.length===t.length&&(m(),n(a))):y&&N&&!Array.isArray(t)&&y===t.id&&(m(),n(N))},p=this.on(fe.MAGIC_HANDLE_RESPONSE,g(()=>p()))}))})}on(e,t){let n=t.bind(window),a=s=>{s.data.msgType===`${e}-${this.parameters}`&&n(s)};return this.messageHandlers.add(a),()=>this.messageHandlers.delete(a)}waitForReady(){return new Promise(e=>{this.on(fe.MAGIC_OVERLAY_READY,()=>e())})}listen(){this.on(fe.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(fe.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}};var At={};er(At,{EthChainType:()=>nr,Extension:()=>Ie,ExtensionError:()=>Je,ExtensionWarning:()=>Qe,MagicIncomingWindowMessage:()=>fe,MagicOutgoingWindowMessage:()=>_e,MagicPayloadMethod:()=>H,RPCError:()=>Te,RPCErrorCode:()=>Se,SDKError:()=>he,SDKErrorCode:()=>le,SDKWarning:()=>ke,SDKWarningCode:()=>Ae,isPromiEvent:()=>_t});var at=rr(Br()),Ot=rr(Gr());var Do={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"};function xo(e){for(let[t,n]of Object.entries(Do))e.style[t]=n}function Uo(e){let t=[].slice.call(document.querySelectorAll(".magic-iframe"));return Boolean(t.find(n=>n.src.includes(e)))}var Nt=class extends xr{constructor(){super(...arguments);this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(t=>{let n=()=>{if(Uo(encodeURIComponent(this.parameters)))Ir().log();else{let a=document.createElement("iframe");a.classList.add("magic-iframe"),a.dataset.magicIframeLabel=Ke(this.endpoint).host,a.title="Secure Modal",a.src=Ke(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,xo(a),document.body.appendChild(a),t(a)}};["loaded","interactive","complete"].includes(document.readyState)?n():window.addEventListener("load",n,!1)}),window.addEventListener("message",t=>{var n;if(t.origin===this.endpoint&&t.data&&t.data.msgType&&this.messageHandlers.size){t.data.response=(n=t.data.response)!=null?n:{};for(let a of this.messageHandlers.values())a(t)}})}showOverlay(){return we(this,null,function*(){let t=yield this.iframe;t.style.display="block",this.activeElement=document.activeElement,t.focus()})}hideOverlay(){return we(this,null,function*(){var n;let t=yield this.iframe;t.style.display="none",((n=this.activeElement)==null?void 0:n.focus)&&this.activeElement.focus(),this.activeElement=null})}_post(t){return we(this,null,function*(){let n=yield this.iframe;if(n&&n.contentWindow)n.contentWindow.postMessage(t,this.endpoint);else throw _r()})}};var Bo=Object.assign(Er(wt,{platform:"web",sdkName:"magic-sdk",version:"8.0.1",defaultEndpoint:"https://auth.magic.link/",ViewController:Nt,configureStorage:()=>we(void 0,null,function*(){let e=at.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(Ot),yield e.setDriver([at.default.INDEXEDDB,at.default.LOCALSTORAGE,Ot._driver]),e})}),Jt({},At)),Fo=Bo;return jn(Go);})();
if (Magic && Magic.default != null) { Magic = Object.assign(Magic.default, Magic); delete Magic.default; }
